<!DOCTYPE html>
<html>
<head>
    <title>Nessemble</title>
</head>
<body>
    <script src="nessemble.js"></script>
    <script type="text/javascript">
        var Nessemble = function (input) {
            var stdout = [],
                stderr = [],
                i = 0;

            return Module({
                noInitialRun: true,
                onExit: function (rc) {
                    if (stdout.length) {
                        console.log(stdout);
                    }

                    if (stderr.length) {
                        console.error(stderr.join(''))
                    }
                },
                stdin: function () {
                    if (i < input.length) {
                        var code = input.charCodeAt(i);

                        i += 1;

                        return code;
                    } else {
                        return null;
                    }
                },
                stdout: function (code) {
                    if (code < 0) {
                        code += 256;
                    }

                    stdout.push(code);
                },
                stderr: function (code) {
                    stderr.push(String.fromChardCode(code));
                }
            });
        };
    </script>
</body>
</html>
